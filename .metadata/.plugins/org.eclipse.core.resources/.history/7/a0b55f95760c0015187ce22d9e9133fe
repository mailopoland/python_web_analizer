'''
Created on 6 cze 2015

@author: user
'''
import urllib3, os.path
from settings.settings import Settings
from shutil import copyfile

class PageAnalizer():        
    
    # return 0: is OK (site was download before), 1: is OK (but site didn't was download before), any_other: return stauts of downloading error
    def download_site(self,site_url):
        self.site_url = site_url
        http = urllib3.PoolManager()
        r = http.request('GET', 'http://google.com/')
        if(r.status != 200):
            return r.status

        f_name = site_url.replace('/','|')
        
        last_file = Settings().temp_dir() + f_name + "last"
        before_file = Settings().temp_dir() + f_name + "before"
        
        # if we have last copy of this site (not first execute)
        if os.path.isfile(Settings().temp_dir() + f_name + "last"):
            # copy it, it is for now before_file
            copyfile(last_file, before_file)
        print r.status, r.data
        